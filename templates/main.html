<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css">
    <title>FlightLog</title>
    <style>
        .grid {
            display: flex;
            gap: 2rem;
        }

        .left-column {
            flex: 3;
        }

        .right-column {
            flex: 1;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 5px;
        }
        th {
            font-weight: bold;
        }
        td, th, li {
            white-space: nowrap;
            font-size:medium;
            padding: 1px; 
        }
        table, td, th, div, img {
            border: 0px solid red;
        }
    </style>
</head>

<body>
    <main class="container-fluid">
        <div class="grid">
            <section class="left-column">
                <h1>FlightLog</h1>

                <a href="/refresh">Refresh &#x1F501;</a>
                <table>
                    <tr>
                        <th>ID</th>
                        <th>Departure</th>
                        <th>Destination</th>
                        <th>Date</th>
                        <th>Aircraft</th>
                        <th>Callsign</th>
                        <th>Blocktime</th>
                        <th>Airtime</th>
                        <th>takeoff</th>
                        <th>landing</th>
                        <th>blockoff</th>
                        <th>blockon</th>
                        <th>landings</th>
                        <th>crew</th>
                    </tr>
                    {% for flight in data %}
                    <tr>
                        <td><a href="/flight/{{ flight.flightid }}">{{ flight.flightid }}</a></td>
                        <td>{{ flight.departure }}</td>
                        <td>{{ flight.destination }}</td>
                        <td>{{ flight.flightdate["display"] }}</td>
                        <td>{{ flight.actype }}</td>
                        <td>{{ flight.callsign }}</td>
                        <td>{{ flight.blocktime }}</td>
                        <td>{{ flight.airtime }}</td>
                        <td>{{ flight.takeoff }}</td>
                        <td>{{ flight.landing }}</td>
                        <td>{{ flight.blockoff }}</td>
                        <td>{{ flight.blockon }}</td>
                        <td>{{ flight.landings }}</td>
                        <td>{{ flight.crew | striptags }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </section>
            <section class="right-column">
                <h2>Statistics</h2>
                <ul>
                    <li>Blocktime: {{ statistics["blocktime"] }}h</li>
                    <li>Avg. month blocktime: {{ statistics["avg_blocktime_month"] }}h</li>
                    <li>Airtime: {{ statistics["airtime"] }}h</li>
                    <li>Landings: {{ statistics["landings"] }}</li>
                    <li>Aircraft: {{ statistics["aircraft"] }}</li>
                </ul>
                <img src="/graph/blocktimes" style="max-width: 100%; height: auto;">
                <img src="/graph/blocktimes_stacked" style="max-width: 100%; height: auto;">

            </section>
        </div>
    </main>
</body>

</html>
